{% extends 'base.html' %}
{% load static %}
{% block content %}
    <div class="container">
        <div class="container-cart d-flex justify-content-between">
            <div class="cart-book-list">
                <div class="cart-book-list-head weight-600 font-24 color-004872">
                    Cart Products
                </div>
                {% if cart_items %}
                    {% if request.user.is_authenticated %}
                        {% for item in cart_items %}
                            <div class="cart-book-list-loop">
                                <div class="cart-book-list-loop-wrap">
                                    <div class="cart-book-list-loop-img">
                                        <img src="{{item.book.bookURL}}" title="{{item.book.title}}" class="img-fluid">
                                    </div>
                                    <div class="cart-book-list-loop-details">
                                        <div class="cart-book-list-loop-title weight-700 font-24 color-004872 d-flex justify-content-between">
                                        <div>   {{item.book.title}}</div>
                                            <div class="delete-qty-icon">
                                                <a href="{% url 'cart:remove_cart_item' item.id %}">
                                                    <img src="{% static 'img/delete.png' %}" title="delete" class="img-fluid">
                                                </a>
                                            </div>
                                        
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-date-type weight-500 font-16 ">
                                            ({{item.book.get_bookBinding_display}}) | Released: {{item.book.publishedDate | date}}
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-author weight-500 font-16 ">
                                            By: {{item.book.author}} 
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-publisher weight-500 font-16 ">
                                            Publisher: {{item.book.publisher}}
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-sp-mrp weight-500 font-16 d-flex">
                                            <div class="cart-book-list-loop-mrp pe-2 {% if item.book.discountPrice %}line-through{% endif %}">
                                                MRP ₹ {{item.book.price}}
                                            </div>
                                            <div class="cart-book-list-loop-sp weight-500 font-16 ">
                                                Best Price*
                                                <span class="color-red">
                                                    ₹ {{item.book.discountPrice}}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-delivery weight-500 font-16 color-black">
                                            Delivery between APRIL 11-APRIL 12
                                        </div>
                                        <div class="cart-book-list-loop-wishlist weight-500 font-20 color-004872 d-flex justify-content-between">
                                            <a href="{% url 'cart:toWishList' item.id %}">Move to Wishlist</a>
                                            <div class="delete-qty-select">
                                                <select class="form-select" data-cart="{{item.id}}" aria-label="Default select example">
                                                    <option value="1" {% if item.qty == 1 %}selected{% endif %}>Qty: 1</option>
                                                    <option value="2" {% if item.qty == 2 %}selected{% endif %}>Qty: 2</option>
                                                    <option value="3" {% if item.qty == 3 %}selected{% endif %}>Qty: 3</option>
                                                    <option value="4" {% if item.qty == 4 %}selected{% endif %}>Qty: 4</option>
                                                    <option value="5" {% if item.qty == 5 %}selected{% endif %}>Qty: 5</option>
                                                    <option value="6" {% if item.qty == 6 %}selected{% endif %}>Qty: 6</option>
                                                    <option value="7" {% if item.qty == 7 %}selected{% endif %}>Qty: 7</option>
                                                    <option value="8" {% if item.qty == 8 %}selected{% endif %}>Qty: 8</option>
                                                    <option value="9" {% if item.qty == 9 %}selected{% endif %}>Qty: 9</option>
                                                    <option value="10" {% if item.qty == 10 %}selected{% endif %}>Qty: 10</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                    
                        {% for item in cart_items %}
                            <div class="cart-book-list-loop">
                                <div class="cart-book-list-loop-wrap">
                                    <div class="cart-book-list-loop-img">
                                        <img src="{{item.bookURL}}" title="{{item.title}}" class="img-fluid">
                                    </div>
                                    <div class="cart-book-list-loop-details">
                                        <div class="cart-book-list-loop-title weight-700 font-24 color-004872">
                                            {{item.title}}
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-date-type weight-500 font-16 ">
                                            ({{item.get_bookBinding_display}}) | Released: {{item.publishedDate | date}}
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-author weight-500 font-16 ">
                                            By: {{item.author}} 
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-publisher weight-500 font-16 ">
                                            Publisher: {{item.publisher}}
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-sp-mrp weight-500 font-16 d-flex">
                                            <div class="cart-book-list-loop-mrp pe-2 {% if item.discountPrice %}line-through{% endif %}">
                                                MRP ₹ {{item.price}}
                                            </div>
                                            <div class="cart-book-list-loop-sp weight-500 font-16 ">
                                                Best Price*
                                                <span class="color-red">
                                                    ₹ {{item.discountPrice}}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="pt-1 cart-book-list-loop-delivery weight-500 font-16 color-black">
                                            Delivery between APRIL 11-APRIL 12
                                        </div>
                                    </div>
                                    <div class="delete-qty">
                                        <div class="delete-qty-icon">
                                            <a href="{% url 'cart:remove_cart_item' item.id %}">
                                                <img src="{% static 'img/delete.png' %}" title="delete" class="img-fluid">
                                            </a>
                                        </div>
                                        <div class="delete-qty-select">
                                            <a href="{% url 'user:loginView' %}">Login to change Quantity</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% else %}
                    No book in cart
                {% endif %}
            </div>
            <div class="cart-books-total-promo">
                <div class="promocode color-004872 font-24 weight-500">
                    Promocode
                </div>
                <div class="promocode color-004872 font-24 weight-500">
                    Amount Payable
                </div>
                <div class="amount-payable">
                    <div class="amount-payable-mrp d-flex justify-content-between">
                        <div class="amount-payable-mrp-text">
                            MRP Total
                        </div>
                        <div class="amount-payable-mrp-total">
                            ₹ {{amountPayable.mrpTotal}}
                        </div>
                    </div>
                    <div class="amount-payable-discount d-flex justify-content-between">
                        <div class="amount-payable-discount-text">
                            Additional Discount-   
                        </div>
                        <div class="amount-payable-discount-total">
                            ₹ {{amountPayable.discount}}
                        </div>
                    </div>
                    {% comment %} <div class="amount-payable-shiping d-flex justify-content-between">
                        <div class="amount-payable-shiping-text">
                            Shipping/Delivery Charges
                        </div>
                        <div class="amount-payable-shiping-total">
                            ₹ 0.00
                        </div>
                    </div> {% endcomment %}
                    <div class="amount-payable-total-saving d-flex justify-content-between">
                        <div class="amount-payable-total-saving-text weight-500 font-18 color-black">
                            Total Savings
                        </div>
                        <div class="amount-payable-total-saving-total weight-500 font-18 color-black">
                            ₹ {{amountPayable.discount}}
                        </div>
                    </div>
                    <div class="amount-payable-total d-flex justify-content-between">
                        <div class="amount-payable-total-text weight-500 font-18 color-black">
                            Total Payable
                        </div>
                        <div class="amount-payable-total-total color-red weight-500 font-18">
                            ₹ {{amountPayable.totalPayable}}
                        </div>
                    </div>
                </div>
                <div class="procced">
                    <a href="{% url 'cart:selectAddress' %}">Procced</a>
                </div>
            </div>
        </div>
        <div class="wish-head font-24 color-004872">
            My Wishlist
        </div>
      
        {% if request.user.is_authenticated %}
            {% if wish_items %}
                {% for item in wish_items %}
                    <div class="cart-book-list-loop">
                        <div class="cart-book-list-loop-wrap">
                            <div class="cart-book-list-loop-img">
                                <img src="{{item.book.bookURL}}" title="{{item.book.title}}" class="img-fluid">
                            </div>
                            <div class="cart-book-list-loop-details">
                                <div class="cart-book-list-loop-title weight-700 font-24 color-004872 d-flex justify-content-between">
                                <div>   {{item.book.title}}</div>
                                    <div class="delete-qty-icon">
                                        <a href="{% url 'wishlist:deleteWishListBook' item.id %}">
                                            <img src="{% static 'img/delete.png' %}" title="delete" class="img-fluid">
                                        </a>
                                    </div>
                                
                                </div>
                                <div class="pt-1 cart-book-list-loop-date-type weight-500 font-16 ">
                                    ({{item.book.get_bookBinding_display}}) | Released: {{item.book.publishedDate | date}}
                                </div>
                                <div class="pt-1 cart-book-list-loop-author weight-500 font-16 ">
                                    By: {{item.book.author}} 
                                </div>
                                <div class="pt-1 cart-book-list-loop-publisher weight-500 font-16 ">
                                    Publisher: {{item.book.publisher}}
                                </div>
                                <div class="pt-1 cart-book-list-loop-sp-mrp weight-500 font-16 d-flex">
                                    <div class="cart-book-list-loop-mrp pe-2 {% if item.book.discountPrice %}line-through{% endif %}">
                                        MRP ₹ {{item.book.price}}
                                    </div>
                                    <div class="cart-book-list-loop-sp weight-500 font-16 ">
                                        Best Price*
                                        <span class="color-red">
                                            ₹ {{item.book.discountPrice}}
                                        </span>
                                    </div>
                                </div>
                                <div class="pt-1 cart-book-list-loop-delivery weight-500 font-16 color-black">
                                    Delivery between APRIL 11-APRIL 12
                                </div>
                                <div class="cart-book-list-loop-wishlist weight-500 font-20 color-004872 d-flex justify-content-between">
                                    <a href="{% url 'wishlist:toCart' item.id %}">Add to Cart</a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            
            {% else %}
                No book added to wishlist
            {% endif %}
        {% endif %}
        
    </div>
{% endblock content %}
{% block js %}
    <script src="{% static 'js/cart.js' %}"></script>
{% endblock js %}